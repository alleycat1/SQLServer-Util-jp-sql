USE [master] 
GO

ALTER AVAILABILITY GROUP AG01 
MODIFY REPLICA ON N'2016-wsfc-01' 
WITH ( 
SECONDARY_ROLE(READ_ONLY_ROUTING_URL=N'TCP://2016-wsfc-01.wsfc.local:1433') 
)
GO

ALTER AVAILABILITY GROUP AG01 
MODIFY REPLICA ON N'2016-wsfc-02' 
WITH ( 
SECONDARY_ROLE(READ_ONLY_ROUTING_URL=N'TCP://2016-wsfc-02.wsfc.local:1433') 
)
GO

ALTER AVAILABILITY GROUP AG01 
MODIFY REPLICA ON N'2016-wsfc-03' 
WITH ( 
SECONDARY_ROLE(READ_ONLY_ROUTING_URL=N'TCP://2016-wsfc-03.wsfc.local:1433') 
)


-- 従来のルーティングリスト
ALTER AVAILABILITY GROUP [AG01] 
MODIFY REPLICA ON N'2016-WSFC-01'
WITH ( 
PRIMARY_ROLE(READ_ONLY_ROUTING_LIST=(N'2016-WSFC-02',N'2016-WSFC-03',N'2016-WSFC-01') 
))

ALTER AVAILABILITY GROUP [AG01] 
MODIFY REPLICA ON N'2016-WSFC-02'
WITH ( 
PRIMARY_ROLE(READ_ONLY_ROUTING_LIST=(N'2016-WSFC-01',N'2016-WSFC-03',N'2016-WSFC-02') 
))

ALTER AVAILABILITY GROUP [AG01] 
MODIFY REPLICA ON N'2016-WSFC-03'
WITH ( 
PRIMARY_ROLE(READ_ONLY_ROUTING_LIST=(N'2016-WSFC-01',N'2016-WSFC-02',N'2016-WSFC-03') 
))

-- 負荷分散ルーティングリスト
ALTER AVAILABILITY GROUP [AG01] 
MODIFY REPLICA ON N'2016-WSFC-01'
WITH ( 
PRIMARY_ROLE(READ_ONLY_ROUTING_LIST=((N'2016-WSFC-02',N'2016-WSFC-03',N'2016-WSFC-01')) 
))

ALTER AVAILABILITY GROUP [AG01] 
MODIFY REPLICA ON N'2016-WSFC-02'
WITH ( 
PRIMARY_ROLE(READ_ONLY_ROUTING_LIST=((N'2016-WSFC-01',N'2016-WSFC-03',N'2016-WSFC-02')) 
))

ALTER AVAILABILITY GROUP [AG01] 
MODIFY REPLICA ON N'2016-WSFC-03'
WITH ( 
PRIMARY_ROLE(READ_ONLY_ROUTING_LIST=((N'2016-WSFC-01',N'2016-WSFC-02',N'2016-WSFC-03')) 
))

